---
title: Getting Started
description: Get started with Proxyflare for Pages
keywords:
  - flaregun
  - proxyflare
  - reverse proxy
  - cloudflare pages
  - docs
slug: getting-started
sidebar_position: 2
---

Proxyflare is a reverse proxy that makes moving traffic around your domain and across the internet easy.

This package provides Proxyflare to websites deployed with [Cloudflare Pages](https://developers.cloudflare.com/pages).

:::info Powered by Typescript

For Typescript users, Proxyflare for Pages comes with type definitions and in-editor documentation.

:::

## Use cases

### Proxy traffic to another service

Proxy traffic from a part of your domain to another service on the same domain or elsewhere on the internet

#### Examples

1. Move traffic from `https://yoursite.com/api/*` to `https://your-hosted-api.com`
1. Host a service on `https://torrents.yoursite.com/*` to `http://yoursite.com:41321`

#### Notes

- Proxyflare is compatible with websockets
- Proxied services should be available on the public internet
- Proxying services on both standard and custom ports is supported (e.g. `80`, `443`, `8787`, etc.)

### Mount a hosted website on your domain

#### Examples

1. Mount your React-powered documentation hosted at `https://hosted-docs.com` on `https://yoursite.com/docs/*`
1. Mount a WordPress site hosted at `https://some-wordpress-blog.com` on `https://yoursite.com/blog/*`

#### Notes

- Mounted websites should configure the base url to match its mounted pathname
- Website resources must be carefully added to `Route["to.website.resources"]`

### Redirect traffic from one place to another

1. Version an API (e.g. redirect `/v2/api`)
1. Redirect stale content URLs

#### Notes

- Redirects are wildcard-compatible
- Any 300-level status code is supported

### Serve text files through Proxyflare

1. Publish unique `robots.txt` and other website metadata files around your domain

#### Notes

- Custom response headers are supported to set `Content-Type` for text, JSON, or others
- Text files should be no larger than 16KB

## Install

Install `@flaregun-net/proxyflare-for-pages` using your preferred Javascript package manager.

```bash
npm install @flaregun-net/proxyflare-for-pages
# OR
yarn add @flaregun-net/proxyflare-for-pages
```

## Plug in

In your Cloudflare Pages project, create `functions/[[path]].ts`. If your project already has a `functions/[[path]].ts` that exports a single `onRequest` object, convert it to a list of plugins.

The `onRequest` plugins list should include the following configuration.

```ts
// functions/[[path]].ts
import proxyflare from "@flaregun-net/proxyflare-for-pages"

const routes: Route[] = []

export const onRequest = [
  proxyflare({
    config: {
      global: { debug: true },
      routes,
    },
  }),
  // other Pages plugins
]
```

This is a barebones Proxyflare configuration with `debug` enabled that will help with set up and configuration.

:::info Note

Enabling `global.debug` attaches the following debug headers to Proxyflare responses. Make sure
to disable `debug` when you are done configuring Proxyflare.

`x-proxyflare: "running"` signals that Proxyflare is installed and operational on your domain

`x-proxyflare-error: string` describes an error if it occured, usually because of a configuration issue

`x-proxyflare-matched-index: number | "none"` is a zero-indexed `Route` that matched the request or "none"

`x-proxyflare-matched-pathname: string` is the pathname of the matched `Route["from.pattern"]`

`x-proxyflare-proxied-pathname: string` is the pathname of the `ProxiedRequest`

:::
